const https = require('https');
const fs = require('fs');
const fsPromises = require('fs/promises');

// const options = {
//   hostname: 'www.rekhta.org',
//   port: 443,
//   path: '/',
//   method: 'GET'
// };
const options = {
    hostname: 'mirzaleka.medium.com',
    port: 443,
    path: '/a-detailed-look-into-the-node-js-http-module-680eb5e4548a',
    method: 'GET'
};

const req = https.request(options, (res) => {
  console.log(`statusCode: ${res.statusCode}`);
  let data = '';

  res.on('data', (d) => {
    // process.stdout.write(d);
    data += d;
  });
  res.on('end',async()=>{
    await fsPromises.writeFile('new1.html',data);
  })
});
req.on('finish',()=>{
    console.log(`---------------*------------------------------*-----------------------------------*---------------------------------------\n----------------------*----------------------------------\n----------------------------*---------------------------------*--------------------------------------*-----------------------*----------------------*---------------------*------------\n*---------------------*---------------------*-------------\n*------------------------------*-----------------------------*------------------------------*-----------------------------------*---------------------------------------\n----------------------*----------------------------------\n----------------------------*---------------------------------*--------------------------------------*-----------------------*----------------------*---------------------*------------\n*---------------------*---------------------*-------------\n*------------------------------*-----------------------------*------------------------------*-----------------------------------*---------------------------------------\n----------------------*----------------------------------\n----------------------------*---------------------------------*--------------------------------------*-----------------------*----------------------*---------------------*------------\n*---------------------*---------------------*-------------\n*------------------------------*-----------------------------*------------------------------*-----------------------------------*---------------------------------------\n----------------------*----------------------------------\n----------------------------*---------------------------------*--`)
});
req.on('close',async()=>{
    await fsPromises.writeFile('requestcompleted.txt',"Request has been completed");
})

req.on('error', (error) => {
  console.error(error);
});

req.end();